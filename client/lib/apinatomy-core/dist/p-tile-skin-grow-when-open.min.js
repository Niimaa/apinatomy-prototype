!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("jquery"),require("bluebird"));else if("function"==typeof define&&define.amd)define(["jquery","bluebird"],t);else{var n="object"==typeof exports?t(require("jquery"),require("bluebird")):t(e.jQuery,e.P);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r,i;r=[n(1),n(2),n(3)],i=function(e,t){"use strict";var n=e.circuitboard.plugin["do"]("tile-skin-grow-when-open",{resolves:["tile-skin","tile-grow-when-open"]}).modify("Tile.prototype");n.append("construct",function(){var e=1,t=this.element.parent().children().length;this.element.velocity({flexGrow:[e,e]},{duration:1}),this.element.parent().velocity({flexGrow:[t,t]},{duration:1})}),n.replace("growWhenOpen",function(n){var r=this,i=function(){var i=parseFloat(r.element.data("amyFlexGrowTarget")||1),o=n?r.weightWhenOpen():r.weightWhenClosed();r.element.data("amyFlexGrowTarget",o);var s=0;r.element.parent().children().each(function(){s+=parseFloat(e(this).data("amyFlexGrowTarget")||1)});var a=s-o+i;return t.all([new t(function(e){r.element.velocity({flexGrow:[o,i]},{complete:e,duration:300})}),new t(function(e){r.element.parent().velocity({flexGrow:[s,a]},{complete:e,duration:300})})])},o=this.element.children("section");return n?(o.css({visibility:"hidden",opacity:0}),i().then(function(){return new t(function(e){o.css("visibility","visible"),o.velocity({opacity:[1,0]},{complete:e,duration:200})})})):(o.css("visibility","visible"),i().then(function(){o.css("visibility","hidden")}))})}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(t){t.exports=e},function(e){e.exports=t},function(e,t,n){var r=n(4);"string"==typeof r&&(r=[[e.id,r,""]]);n(5)(r,{})},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".tilemap .tile>section{opacity:0;visibility:hidden;}",""])},function(e){function t(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=l[r.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(i(r.parts[s],t))}else{for(var a=[],s=0;s<r.parts.length;s++)a.push(i(r.parts[s],t));l[r.id]={id:r.id,refs:1,parts:a}}}}function n(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],s=i[1],a=i[2],l=i[3],u={css:s,media:a,sourceMap:l};n[o]?n[o].parts.push(u):t.push(n[o]={id:o,parts:[u]})}return t}function r(){var e=document.createElement("style"),t=f();return e.type="text/css",t.appendChild(e),e}function i(e,t){var n,i,o;if(t.singleton){var l=d++;n=p||(p=r()),i=s.bind(null,n,l,!1),o=s.bind(null,n,l,!0)}else n=r(),i=a.bind(null,n),o=function(){n.parentNode.removeChild(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function o(e,t,n){var r=["/** >>"+t+" **/","/** "+t+"<< **/"],i=e.lastIndexOf(r[0]),o=n?r[0]+n+r[1]:"";if(e.lastIndexOf(r[0])>=0){var s=e.lastIndexOf(r[1])+r[1].length;return e.slice(0,i)+o+e.slice(s)}return e+o}function s(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=o(e.styleSheet.cssText,t,i);else{var s=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function a(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(i&&"function"==typeof btoa)try{n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(i))+" */",n='@import url("data:text/css;base64,'+btoa(n)+'")'}catch(o){}if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var l={},u=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},c=u(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),f=u(function(){return document.head||document.getElementsByTagName("head")[0]}),p=null,d=0;e.exports=function(e,r){r=r||{},"undefined"==typeof r.singleton&&(r.singleton=c());var i=n(e);return t(i,r),function(e){for(var o=[],s=0;s<i.length;s++){var a=i[s],u=l[a.id];u.refs--,o.push(u)}if(e){var c=n(e);t(c,r)}for(var s=0;s<o.length;s++){var u=o[s];if(0===u.refs){for(var f=0;f<u.parts.length;f++)u.parts[f]();delete l[u.id]}}}}},function(e){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];e.push(n[2]?"@media "+n[2]+"{"+n[1]+"}":n[1])}return e.join("")},e}}])});