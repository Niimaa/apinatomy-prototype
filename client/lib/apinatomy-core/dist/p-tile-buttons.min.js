!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("jquery"),require("bluebird"));else if("function"==typeof define&&define.amd)define(["jquery","bluebird"],e);else{var n="object"==typeof exports?e(require("jquery"),require("bluebird")):e(t.jQuery,t.P);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r,o;r=[n(1),n(2),n(3),n(5)],o=function(t,e,n){"use strict";var r=n.button,o=t.circuitboard.plugin({name:"tile-buttons",requires:["core"]});o.add("Tile.prototype.addButton",function(n){var o=n,i=o.name,u=o.icon;this._buttonHolder||(e.makePositioned(this.element),this._buttonHolder=t('\n			    <div class="tile-button-holder"></div>\n			').appendTo(this.element));var s=t('\n			<div class="tile-button '+i+'"\n			     style="background-image: url('+u+')">\n			</div>\n		').appendTo(this._buttonHolder);return this.newEvent("tile-button:"+i,{source:s.mouseClick({threshold:this.circuitboard.options.dragTheshold}).which(r.LEFT).skipPropagation("tile-left-click")}),this.event("tile-button:"+i)})}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(e){e.exports=t},function(t,e,n){var r,o;r=[n(4)],o=function(t){"use strict";var e={newClass:function(t){var e=void 0!==arguments[1]?arguments[1]:{};return t.prototype=e,t.prototype.constructor=t,t},newSubclass:function(t,n){var r=void 0!==arguments[2]?arguments[2]:{},o=n(t.prototype.constructor);return o.prototype=Object.create(t.prototype),e.extend(o.prototype,r),o.prototype.constructor=o,o},extend:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t},field:function(t){return function(e){return e[t]}},call:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.apply(void 0,e)},id:function(t){return t},getDef:function(t,n,r){return e.isUndefined(t[n])&&("function"==typeof r&&(r=r()),t[n]=r),t[n]},object:function(t,n){return e.getDef(t,n,{})},array:function(t,n){return e.getDef(t,n,[])},pull:function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n)},makeEmpty:function(t){for(;t.length>0;)t.pop()},bindA:function(t,e,n){return t.bind.apply(t,[e].concat(n))},bind:function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.bindA(t[n],t,r)},applyConstructor:function(t,e){var n=t.bind.apply(t,[null].concat(e));return new n},assert:function(t,e){if(!t)throw new Error(e||"Assertion failed")},isUndefined:function(t){return"undefined"==typeof t},isDefined:function(t){return"undefined"!=typeof t},isPlainObject:function(t){return"object"==typeof t&&t.constructor===Object},isFunction:function(t){return"function"==typeof t},objValues:function(t){return Object.keys(t).map(function(e){return t[e]})},makePositioned:function(t){"static"===t.css("position")&&t.css("position","relative")},defOr:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;r+=1)if(e.isDefined(t[r]))return t[r]},debounce:function(t,e,n){var r;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var u=this,s=function(){r=null,t.apply(n||u,o)};clearTimeout(r),r=setTimeout(s,e)}},oncePerStack:function(t,e){var n=!0,r=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n&&(n=!1,setTimeout(function(){n=!0},0),t.apply(e||this,r))};return r.allowAdditionalCall=function(){n=!0},r},cached:function(t){function n(){var t=o(),e=u;i(t,e)||(u=t,f.forEach(function(n){return n(t,e)}))}var r=t,o=r.retrieve,i=r.isEqual;i=i||function(t,e){return t===e};var u,s=e.oncePerStack(n),a=function(){return s(),u},f=[];return a.onChange=function(t){return f.push(t),a},a.allowAdditionalCall=function(){s.allowAdditionalCall()},s(),a},promisify:function(e,n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return new t(function(t,o){try{e[n].apply(e,r.concat(t))}catch(i){o(i)}})}},findIndex:function(t,e){for(var n=0;n<t.length;++n)if(e(t[n],n,t))return n;return-1},memoize:function(t){var n=[],r=[];return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var u=e.findIndex(n,function(t){return t.every(function(t,e){return t===o[e]})});if(u>=0)return r[u];var s=t.apply(this,o);return n.push(o),r.push(s),s}}},n=1e-6,r=function(t,e){return t>e-n&&e+n>t};return e.Position=e.newClass(function(t,e){this.top=t,this.left=e}),e.Position.subtract=function(t,n){return new e.Position(t.top-n.top,t.left-n.left)},e.Position.equals=function(t,n){return e.isDefined(t)&&e.isDefined(n)&&r(t.top,n.top)&&r(t.left,n.left)},e.Size=e.newClass(function(t,e){this.height=t,this.width=e}),e.Size.equals=function(t,n){return e.isDefined(t)&&e.isDefined(n)&&r(t.height,n.height)&&r(t.width,n.width)},e}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(t){!(t.exports={button:{LEFT:1,MIDDLE:2,RIGHT:3},key:{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_META:91,RIGHT_META:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUALS:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222}})},function(t){t.exports=e},function(t,e,n){var r=n(6);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".tile>.tile-button-holder{position:absolute;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;top:2px;right:2px;margin:0;padding:0;}.tile>.tile-button-holder>.tile-button{display:block;background-size:18px;background-repeat:no-repeat;background-position:center;width:20px;height:20px;margin-left:2px;border:solid 1px transparent;}.tile>.tile-button-holder>.tile-button:hover{border:dotted 1px white;}.tile:not(:hover)>.tile-button-holder{display:none;}",""])},function(t){function e(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=a[r.id];if(i){i.refs++;for(var u=0;u<i.parts.length;u++)i.parts[u](r.parts[u]);for(;u<r.parts.length;u++)i.parts.push(o(r.parts[u],e))}else{for(var s=[],u=0;u<r.parts.length;u++)s.push(o(r.parts[u],e));a[r.id]={id:r.id,refs:1,parts:s}}}}function n(t){for(var e=[],n={},r=0;r<t.length;r++){var o=t[r],i=o[0],u=o[1],s=o[2],a=o[3],f={css:u,media:s,sourceMap:a};n[i]?n[i].parts.push(f):e.push(n[i]={id:i,parts:[f]})}return e}function r(){var t=document.createElement("style"),e=l();return t.type="text/css",e.appendChild(t),t}function o(t,e){var n,o,i;if(e.singleton){var a=p++;n=d||(d=r()),o=u.bind(null,n,a,!1),i=u.bind(null,n,a,!0)}else n=r(),o=s.bind(null,n),i=function(){n.parentNode.removeChild(n)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}function i(t,e,n){var r=["/** >>"+e+" **/","/** "+e+"<< **/"],o=t.lastIndexOf(r[0]),i=n?r[0]+n+r[1]:"";if(t.lastIndexOf(r[0])>=0){var u=t.lastIndexOf(r[1])+r[1].length;return t.slice(0,o)+i+t.slice(u)}return t+i}function u(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=i(t.styleSheet.cssText,e,o);else{var u=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(u,s[e]):t.appendChild(u)}}function s(t,e){var n=e.css,r=e.media,o=e.sourceMap;if(o&&"function"==typeof btoa)try{n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(o))+" */",n='@import url("data:text/css;base64,'+btoa(n)+'")'}catch(i){}if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var a={},f=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},c=f(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),l=f(function(){return document.head||document.getElementsByTagName("head")[0]}),d=null,p=0;t.exports=function(t,r){r=r||{},"undefined"==typeof r.singleton&&(r.singleton=c());var o=n(t);return e(o,r),function(t){for(var i=[],u=0;u<o.length;u++){var s=o[u],f=a[s.id];f.refs--,i.push(f)}if(t){var c=n(t);e(c,r)}for(var u=0;u<i.length;u++){var f=i[u];if(0===f.refs){for(var l=0;l<f.parts.length;l++)f.parts[l]();delete a[f.id]}}}}},function(t){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];t.push(n[2]?"@media "+n[2]+"{"+n[1]+"}":n[1])}return t.join("")},t}}])});